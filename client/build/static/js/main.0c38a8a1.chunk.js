(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,n){},168:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),r=n.n(c),i=n(17),o=n.n(i),s=(n(114),n(7)),u=n(76),l=n(102),d=(n(82),n(10)),b=n(14),j=n.n(b),f=n(29),m=n(23),p=n(193),O=n(96),h=n.n(O),x=n(97),g=n.n(x),v=n(98),y=n.n(v),w=n(190),k=n(194),C=n(198),T=n(191),S=n(195),E=n(196),P=n(197),A=n(200),N=n(19),_=n(192),R=(n(168),Object(w.a)((function(e){var t;return{root:{position:"relative",height:"100%","& img":{width:"100%",opacity:"20%"}},name:(t={position:"absolute",top:"50%",left:"50%"},Object(N.a)(t,"top","50%"),Object(N.a)(t,"transform","translate(-50%,-50%)"),Object(N.a)(t,"backgroundColor","#F4E4CC"),Object(N.a)(t,"color","#141414"),Object(N.a)(t,"width","100%"),Object(N.a)(t,"padding","10px"),Object(N.a)(t,"textAlign","center"),Object(N.a)(t,"fontWeight",800),t),linear:{color:"#F4E4CC"},buttonProgress:{color:"#F4E4CC",position:"absolute",top:"-25px",right:"-25px",zIndex:100}}}))),F=function(e){var t=e.playlist,n=e.idx,i=e.added,o=R(),s=Object(c.useState)(!1),u=Object(m.a)(s,2),l=u[0],d=u[1],b=r.a.useRef(),j=r.a.useRef();Object(c.useEffect)((function(){return i&&(console.log(i),b.current=window.setTimeout((function(){d(!0)}),3e3)),function(){clearTimeout(b.current)}}),[i]),Object(c.useEffect)((function(){return l&&(console.log({succ:l}),j.current=window.setTimeout((function(){d(!1)}),2e3)),function(){clearTimeout(j.current)}}),[l]);return Object(a.jsx)("div",{children:Object(a.jsxs)(C.a,{className:o.root,children:[Object(a.jsx)("img",{src:t.images[0].url}),Object(a.jsx)(T.a,{className:o.name,children:t.name}),i&&!l&&Object(a.jsx)(_.a,{size:80,className:o.buttonProgress}),Object(a.jsx)("p",{className:l?"index added success":i?"index added":"index",children:l?"\u2713":n})]})})},I=n(199),L=Object(w.a)((function(e){return{root:{padding:"0 1rem",background:"#30333C",height:"100%",minHeight:"100vh"},toast:{marginBottom:"4rem"},info:{padding:"5rem 0",color:"#F4E4CC"}}})),W=Object(l.a)({palette:{primary:{main:"#000"},secondary:{main:"#fff"}}}),D=Object(s.f)((function(e){var t=Object(c.useState)(!1),n=Object(m.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)({name:"",albumArt:"",artists:[],uri:""}),s=Object(m.a)(o,2),u=s[0],l=s[1],b=Object(c.useState)(null),O=Object(m.a)(b,2),x=(O[0],O[1]),v=Object(c.useState)(null),w=Object(m.a)(v,2),N=w[0],_=w[1],R=Object(c.useState)(!1),D=Object(m.a)(R,2),z=D[0],B=D[1],H=Object(c.useState)(""),K=Object(m.a)(H,2),M=K[0],U=K[1],J=L(),Y=new g.a;Object(c.useEffect)((function(){var t=function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getMe();case 3:t=e.sent,x(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n=e.match.params,a=n.accessToken;n.refreshToken;a&&(Y.setAccessToken(a),t(),i(!0))}),[]),Object(c.useEffect)((function(){r&&function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getUserPlaylists();case 3:t=e.sent,_(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("GET PLAYLISTSERROR: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[r]),Object(c.useEffect)((function(){var e=function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,n.callProjectApi("setClientData",{value:t},(function(e,t){e&&alert(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(f.a)(j.a.mark((function e(t){var a,c,r,i,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return a=e.sent,c=V(a,t-1),e.next=6,q();case 6:return r=e.sent,console.log({playlistid:c}),console.log({nowplaying:r}),e.prev=9,e.next=12,Y.addTracksToPlaylist(c,[r.uri]);case 12:e.sent,(i=a.items)[t-1]=Object(d.a)(Object(d.a)({},i[t-1]),{},{added:!0}),_(Object(d.a)(Object(d.a)({},N),{},{items:i})),3,o=0,s=setInterval((function(){++o>3&&(i[t-1]=Object(d.a)(Object(d.a)({},i[t-1]),{},{added:!1}),_(Object(d.a)(Object(d.a)({},N),{},{items:i})),clearInterval(s),U("Added ".concat(r.name," to ").concat(a.items[t-1].name,"!")),B(!0))}),1e3),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),console.log(e.t0);case 24:n.callProjectApi("setPlaylistName",{value:{songName:r.name,playlistName:a.items[t-1].name}},(function(e,t){e&&alert(e)}));case 25:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t){return e.apply(this,arguments)}}(),n=y()({key:"b6e565f665bf8dc44cf065641e6ae6e62e956eca572e1d8b807a3e2338fdd0dc/stage",onCommand:function(n){var a=n.command,c=n.number;switch(a){case"getNowPlaying":e();break;case"addToPlaylist":"string"===typeof c&&(c=h()(c,{fuzzy:!0})),t(c)}}})}),[]);var G=function(){var e=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getUserPlaylists();case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),V=function(e,t){return e.items[t].id},q=function(){var e=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getMyCurrentPlaybackState();case 3:return t=e.sent,console.log({spotifySong:t}),n={name:t.item.name,artists:t.item.artists,uri:t.item.uri},l(Object(d.a)(Object(d.a)({},u),{},{name:t.item.name,albumArt:t.item.album.images[0].url,artists:t.item.artists,uri:t.item.uri})),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:J.root,children:Object(a.jsx)(p.a,{theme:W,children:Object(a.jsxs)(k.a,{maxWidth:"lg",children:[Object(a.jsx)(C.a,{className:J.info,children:Object(a.jsx)(T.a,{variant:"h1",children:"Alanify"})}),Object(a.jsx)(S.a,{in:z,children:Object(a.jsx)(I.a,{className:J.toast,action:Object(a.jsx)(E.a,{onClick:function(){return B(!1)},children:"Close"}),children:M})}),N&&Object(a.jsx)(P.a,{container:!0,spacing:6,children:N.items.map((function(e,t){return Object(a.jsx)(A.a,{in:!0,timeout:200*t,direction:"right",children:Object(a.jsx)(P.a,{item:!0,xs:12,sm:6,md:3,children:Object(a.jsx)(F,{playlist:e,idx:t+1,added:e.added})})},e.id)}))})]})})})})),z=Object(w.a)((function(){return{root:{backgroundColor:"#30333c",width:"100vw",height:"100vh",overflow:"hidden",textAlign:"center",display:"flex",alignItems:"center"}}})),B=function(){var e=z();return Object(a.jsx)(C.a,{className:e.root,children:Object(a.jsx)(k.a,{maxWidth:"lg",children:Object(a.jsx)(E.a,{style:{margin:"0 auto",backgroundColor:"#f4e4cc",fontWeight:800,color:"#30333c"},variant:"contained",color:"#f4e4cc",onClick:function(){return window.location.assign("https://alanify.herokuaoo.com:".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ALAN_KEY:"b6e565f665bf8dc44cf065641e6ae6e62e956eca572e1d8b807a3e2338fdd0dc/stage"}).PORT,"/login"))},children:"Continue with Spotify"})})})},H=(Object(l.a)({palette:{primary:{main:"#000"},secondary:{main:"#fff"}}}),function(){var e=Object(s.e)();return Object(a.jsxs)(u.a,{history:e,children:[Object(a.jsx)(s.a,{exact:!0,path:"/",component:B}),Object(a.jsx)(s.a,{path:"/user/:accessToken/:refreshToken",component:D}),Object(a.jsx)(s.a,{path:"/error/:errorMsg",component:Error})]})}),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,202)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(H,{})}),document.getElementById("root")),K()},82:function(e,t,n){}},[[173,1,2]]]);
//# sourceMappingURL=main.0c38a8a1.chunk.js.map