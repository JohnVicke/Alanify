(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{149:function(e,t,n){},150:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),c=n.n(r),s=n(26),i=n.n(s),o=(n(94),n(13)),u=n(8),l=n.n(u),b=n(22),f=n(40),d=n(83),p=n(170),j=n(77),m=n.n(j),O=n(78),h=n.n(O),v=n(79),x=n.n(v),g=(n(149),n(168)),y=n(174),w=n(171),k=n(173),C=n(172),S=n(12),P=n(169),T=(n(150),Object(g.a)((function(e){var t;return{root:{backgroundColor:"#141414",position:"relative",height:"100%","& img":{width:"100%",opacity:"30%"}},name:(t={position:"absolute",top:"50%",left:"50%"},Object(S.a)(t,"top","50%"),Object(S.a)(t,"transform","translate(-50%,-50%)"),Object(S.a)(t,"backgroundColor","#141414"),Object(S.a)(t,"color","#fff"),Object(S.a)(t,"width","100%"),Object(S.a)(t,"padding","10px"),Object(S.a)(t,"textAlign","center"),Object(S.a)(t,"fontWeight",800),t)}}))),A=function(e){var t=e.playlist,n=e.idx,r=e.added,c=T();return Object(a.jsx)("div",{children:Object(a.jsxs)(k.a,{className:c.root,children:[Object(a.jsx)("img",{src:t.images[0].url}),Object(a.jsx)(P.a,{className:c.name,children:t.name}),Object(a.jsx)("p",{className:r?"index added":"index",children:n})]})})},N=Object(g.a)((function(e){return{info:{marginTop:"1rem"}}})),E=Object(d.a)({palette:{primary:{main:"#000"},secondary:{main:"#fff"}}}),I=function(){var e=Object(r.useState)(!1),t=Object(f.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)({name:"",albumArt:"",artists:[],uri:""}),i=Object(f.a)(s,2),u=i[0],d=i[1],j=Object(r.useState)(null),O=Object(f.a)(j,2),v=O[0],g=O[1],S=Object(r.useState)(null),P=Object(f.a)(S,2),T=P[0],I=P[1],F=N(),L=new h.a;Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getMe();case 3:t=e.sent,g(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=z().access_token;t&&(L.setAccessToken(t),e(),c(!0))}),[]),Object(r.useEffect)((function(){n&&function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getUserPlaylists();case 3:t=e.sent,I(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("GET PLAYLISTSERROR: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[n]),Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,n.callProjectApi("setClientData",{value:t},(function(e,t){e&&alert(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(b.a)(l.a.mark((function e(t){var n,a,r,c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return n=e.sent,a=M(n,t-1),e.next=6,U();case 6:return r=e.sent,console.log({playlistid:a}),console.log({nowplaying:r}),e.prev=9,e.next=12,L.addTracksToPlaylist(a,[r.uri]);case 12:e.sent,(c=n.items)[t-1]=Object(o.a)(Object(o.a)({},c[t-1]),{},{added:!0}),I(Object(o.a)(Object(o.a)({},T),{},{items:c})),5,s=0,i=setInterval((function(){++s>5&&(c[t-1]=Object(o.a)(Object(o.a)({},c[t-1]),{},{added:!1}),I(Object(o.a)(Object(o.a)({},T),{},{items:c})),clearInterval(i))}),1e3),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t){return e.apply(this,arguments)}}(),n=x()({key:"b6e565f665bf8dc44cf065641e6ae6e62e956eca572e1d8b807a3e2338fdd0dc/stage",onCommand:function(n){var a=n.command,r=n.number;switch(a){case"getNowPlaying":e();break;case"addToPlaylist":"string"===typeof r&&(r=m()(r,{fuzzy:!0})),t(r)}}})}),[]);var R=function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getUserPlaylists();case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(e,t){return e.items[t].id},U=function(){var e=Object(b.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getMyCurrentPlaybackState();case 3:return t=e.sent,console.log({spotifySong:t}),n={name:t.item.name,artists:t.item.artists,uri:t.item.uri},d(Object(o.a)(Object(o.a)({},u),{},{name:t.item.name,albumArt:t.item.album.images[0].url,artists:t.item.artists,uri:t.item.uri})),e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t};return v?Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(p.a,{theme:E,children:Object(a.jsxs)(w.a,{maxWidth:"lg",children:[Object(a.jsx)(k.a,{className:F.info}),T&&Object(a.jsx)(C.a,{container:!0,spacing:6,children:T.items.map((function(e,t){return Object(a.jsx)(C.a,{item:!0,xs:12,sm:6,md:3,children:Object(a.jsx)(A,{playlist:e,idx:t+1,added:e.added})},e.id)}))})]})})}):Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(p.a,{theme:E,children:Object(a.jsx)(y.a,{onClick:function(){return window.location.assign("http://localhost:8888")},children:"Continue with Spotify!"})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,176)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(I,{})}),document.getElementById("root")),F()},94:function(e,t,n){}},[[155,1,2]]]);
//# sourceMappingURL=main.d27b5d93.chunk.js.map